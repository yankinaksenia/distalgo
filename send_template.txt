macro send(msg,sender, receiver)
{
    channel[sender,receiver] := Append(@, msg);
    sent_history[sender] := Append(@, <<msg, receiver>>);
}